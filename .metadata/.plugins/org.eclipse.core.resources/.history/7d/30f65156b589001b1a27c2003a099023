[comment encoding = UTF-8 /]
[module toDot('http://simplepdl')]


[template public processToDot(aProcess : Process)]
[comment @main/]
[file (aProcess.name, false, 'UTF-8')]
digraph [aProcess.name/] {
	[for (ws : WorkSequence | aProcess.getWSs())]
    [ws.predecessor.name/] -> [ws.successor.name/] ['['/] arrowhead=vee
	[/for]
}
[/file]
[/template]


[query public getWSs(p: Process) : OrderedSet(WorkSequence) = 
	p.processElements->select( e | e.oclIsTypeOf(WorkSequence) )
		->collect( e | e.oclAsType(WorkSequence) )
		->asOrderedSet()
/]

[query public toState(link: WorkSequenceType) : String =
	if link = WorkSequenceType::startToStart then
		's2s'
	else 
		if link = WorkSequenceType::startToFinish then
			's2f'
		else
			if link = WorkSequenceType::finishToStart then
				'f2s'
			else
				'f2f'
			endif
		endif
	endif
/]